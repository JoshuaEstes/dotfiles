####
#
# Mutt configuration file
#
set realname         = 'Joshua Estes'
set folder           = "$HOME/Mail"
set header_cache     = "$HOME/.mutt/cache/headers"
set message_cachedir = "$HOME/.mutt/cache/messages"
set certificate_file = "$HOME/.mutt/certificates"
set alias_file       = "$HOME/.mutt/alias"
set mailcap_path     = "$HOME/.mutt/mailcap"
set tmpdir           = "$HOME/.mutt/tmp"
set spoolfile        = "+josh\@bitpay.com/INBOX"
set signature        = "$HOME/.mutt/signatures/default"
set editor           = "vim"

####
#
# Mutt does not seem to be able to create directories, so this is a little
# hack to get around that
#
#source `mkdir -p $HOME/.mutt/{cache/messages,tmp}; touch $HOME/.mutt/{signature,alias,certificates}; echo /dev/null`
####

# Source various files for different email accounts
#source `FILE=$HOME/.mutt/accounts/bitpay; if [ ! -s "$FILE" ]; then FILE=/dev/null; fi; echo "$FILE"`
### end accounts ###

set   wait_key   = no
set   mbox_type  = Maildir
set   timeout    = 3
set   mail_check = 0
set   delete
set   quit
set   beep_new
set   pipe_decode
set   thorough_search
unset move
unset confirmappend
unset mark_old

set status_chars="*%A"
set status_format="--[ Folder: %f ]--[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]--%>--%?p?( %p postponed )?--"

ignore *
unignore from: to: cc: date: subject:
unhdr_order *
hdr_order from: to: cc: data: subject:

set date_format   = "%m/%d/%Y"
set index_format  = "[%Z] %D %-20.20F %s"
set sort          = threads
set sort_aux      = reverse-last-date-received
#set reply_regexp = ""
set uncollapse_jump
set sort_re

set   pager_index_lines = 10
set   pager_context     = 3
set   pager_stop
set   tilde
unset markers

set   forward_format = "Fwd: %s"
set   attribution    = "On %d, %n wrote:"
set   sendmail_wait  = 0
set   envelope_from
set   sig_dashes
set   edit_headers
set   fast_reply
#set   askcc
set   fcc_attach
set   forward_decode
set   reply_to
set   reverse_name
set   include
set   forward_quote
unset record
unset mime_forward

####
#
# Crypto, more crypto configuration settings are in the accounts directory
# for each account.
#
set pgp_use_gpg_agent        = yes
set pgp_timeout              = 1800
set crypt_autosign           = yes
set crypt_replyencrypt       = yes
set pgp_decode_command       = "gpg %?p?--passphrase-fd 0? --no-verbose --batch --output - %f"
set pgp_verify_command       = "gpg --no-verbose --batch --output - --verify %s %f"
set pgp_decrypt_command      = "gpg --passphrase-fd 0 --no-verbose --batch --output - %f"
set pgp_sign_command         = "gpg --no-verbose --batch --output - --passphrase-fd 0 --armor --detach-sign --textmode %?a?-u %a? %f"
set pgp_clearsign_command    = "gpg --no-verbose --batch --output - --passphrase-fd 0 --armor --textmode --clearsign %?a?-u %a? %f"
set pgp_import_command       = "gpg --no-verbose --import -v %f"
set pgp_export_command       = "gpg --no-verbose --export --armor %r"
set pgp_verify_key_command   = "gpg --no-verbose --batch --fingerprint --check-sigs %r"
set pgp_list_pubring_command = "gpg --no-verbose --batch --with-colons --list-keys %r"
set pgp_list_secring_command = "gpg --no-verbose --batch --with-colons --list-secret-keys %r"
set pgp_good_sign            = "^gpg: Good signature from"
#### end crypto ####

####
#
# Key Bindings
#
bind pager k  previous-line
bind pager j  next-line
bind pager gg top
bind pager G  bottom

bind index gg first-entry
bind index G  last-entry
#### end key bindings ####

source "$HOME/.mutt/colors"

####
#
# Folder hooks, when changing to a new folder, this will change some of the
# mutt configuration to use the correct settings
#
folder-hook "josh@bitpay.com/*" source "$HOME/.mutt/accounts/bitpay"
folder-hook "joshua@dspacelabs.com/*" source "$HOME/.mutt/accounts/dspacelabs"
#### end folder-hook ####
